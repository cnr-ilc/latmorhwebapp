<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <link href="https://lindat.mff.cuni.cz/common/public/css/lindat.css" rel="stylesheet" />
                <title>LatMorph Web Interface</title>
            </f:facet>
        </h:head>

        <h:body>

            <!--            <p:layout fullPage="true">-->





            <h:form>              
                <p:fieldset legend="Insert your text" style="margin-bottom:20px">
                    <h:panelGrid columns="3" cellpadding="2" style="width: 80%;">
                        <p:inputTextarea onselect="setSelectedText()" rows="6" value="#{searchPanelBean.textInArea}" style="width: 100%;" id="textarea">        
                        </p:inputTextarea>           
                        <p:remoteCommand name="setSelectedTextCommand" 
                                         actionListener="#{searchPanelBean.setSelectedText()}"
                                         update="currentSelectedText" />


                        <h:panelGrid columns="1" cellpadding="1" border="2">
                            <p:outputLabel for ="selection">Select the output</p:outputLabel>
                            <p:selectManyCheckbox id="selection" value="#{searchPanelBean.selectedOutputFormats}">
                                <f:selectItem itemLabel="Complete" itemValue="4"/>
                                <f:selectItem itemLabel="List of Lemmas" itemValue="2" />
                                <f:selectItem itemLabel="Form Analysis" itemValue="1" />

                            </p:selectManyCheckbox>
                        </h:panelGrid>
                        <h:outputText value="Selected Text is #{searchPanelBean.selectedTextInArea}" 
                                      id="currentSelectedText" />

                        <script src="#{resource['flexibleArea.js']}" />
                        <script src="#{resource['jquery-textrange.js']}" />
                        <script>
                            function setSelectedText() {
                                var range = $('.ui-inputtextarea').textrange();// general selector
                                setSelectedTextCommand([{name: 'selectedText', value: range.text}]);
                            }
                        </script>
                    </h:panelGrid>
                </p:fieldset>
                <p />
                <!--                <p:fieldset legend="Your answer" style="margin-bottom:20px">
                                    <h:panelGrid columns="1" cellpadding="2" style="width: 80%;">
                                        <p:inputTextarea  rows="6" value="#{searchPanelBean.response}" style="width: 100%;" id="responseta">        
                                        </p:inputTextarea>           
                
                                    </h:panelGrid>
                                </p:fieldset>-->
                <p:fieldset legend="Your answer" style="margin-bottom:20px">
                    <h:panelGrid columns="1" cellpadding="2" style="width: 80%;">
                        <p:tree value="#{contextMenuView.mainRoot}" var="node" orientation="horizontal" id="nodepanel" >

                            <p:treeNode>
                                <h:outputText value="#{node}" />
                            </p:treeNode>

                        </p:tree>
                    </h:panelGrid>
                </p:fieldset>


                <p:contextMenu for="textarea">
                    <p:menuitem value="Lemmatize #{searchPanelBean.selectedTextInArea}" actionListener="#{contextMenuView.lemmatizeFormAndCreateResponse}"  icon="ui-icon-disk" update="nodepanel"/>

                </p:contextMenu>
            </h:form>


            <!--            </p:layout>-->

        </h:body>

    </f:view>
</html>

